---
import { getEntry, getCollection, render } from "astro:content";
import MainGridLayout from "@/layouts/MainGridLayout.astro";
import { siteConfig } from "@/config";
import ServiceCards from "@/components/ServiceCards.astro";

import "@/styles/main.css";
import "@/styles/markdown.css";

const homeEntry = await getEntry("spec", "home");
if (!homeEntry) {
  throw new Error("Home page content not found");
}

const projects = await getCollection("posts");
const blogs = await getCollection("blogs");

const totalProjects = 5;
const totalBlogs = blogs.length;
const totalWebsites = 9

const { Content } = await render(homeEntry);
const banner = siteConfig.banner.enable ? siteConfig.banner.src : undefined;
---

<MainGridLayout title="Home" description="Welcome to my portfolio" {banner}>
  <div class="space-y-12">
    <ServiceCards 
      totalProjects={totalProjects}
      totalBlogs={totalBlogs}
      totalWebsites={totalWebsites}
    />
    
    <!-- Projects Image Section -->
    <div class="card-base p-6 md:p-8">
      <h2 class="text-3xl font-bold text-center mb-6 text-black dark:text-white">
        My Web and Application Projects
      </h2>
      <div class="flex justify-center">
        <img 
          src="/images/projects.png" 
          alt="My Web and Application Projects" 
          class="w-3/4 sm:w-2/3 md:w-1/2 max-w-4xl rounded-lg shadow-lg"
        />
      </div>
    </div>
    
    <div class="card-base p-6 md:p-8">
      <article class="prose dark:prose-invert max-w-none">
        <Content />
      </article>
    </div>
  </div>
</MainGridLayout>